---
layout: post
title: '06 Puerta - Crear un videojuego 2D con Ruby y Gosu '
date: '2017-11-15T13:47:00.000+01:00'
author: AITOR TOMAS PIN
tags: 
modified_time: '2017-12-29T18:47:38.907+01:00'
thumbnail: https://3.bp.blogspot.com/-GxJjNZ2e-vI/WkY4tVGRAPI/AAAAAAAAADY/4T6F9RcGjggSX9KKJMizaew2QtO7xqQRACLcBGAs/s72-c/bells_door.png
blogger_id: tag:blogger.com,1999:blog-611028137431305192.post-4339523804236623305
blogger_orig_url: http://compupiensaumh.blogspot.com/2017/11/06-puerta-crear-un-videojuego-2d-con-ruby-y-gosu.html
---

En los posts anteriores hemos visto como crear un videojuego utilizando Ruby y la gema Gosu:<br />- <a href="https://compupiensaumh.blogspot.com.es/2017/10/01-prerrequisitos-crear-un-videojuego-2d-con-ruby-y-gosu.html">01 Prerrequisitos</a>: Los prerrequisitos iniciales para poder comenzar a desarrollar nuestro juego con Ruby y Gosu.<br />- <a href="https://compupiensaumh.blogspot.com.es/2017/10/02-hola-mundo-crear-un-videojuego-2d-con-ruby-y-gosu.html">02 Hola mundo</a>: Un pequeño programa Hola Mundo para introducirnos en el mundo de Gosu.<br />- <a href="https://compupiensaumh.blogspot.com.es/2017/12/03-descripcion-crear-un-videojuego-2d-con-ruby-y-gosu.html">03 Descripción</a>: Descripción del ejercicio a realizar y especificaciones del juego.<br />- <a href="https://compupiensaumh.blogspot.com.es/2017/11/04-medios-crear-un-videojuego-2d-con-ruby-y-gosu.html">04 Medios</a>: Definición de los medios gráficos y de audio a utilizar en el juego.<br />- <a href="https://compupiensaumh.blogspot.com.es/2017/11/05-campanas-crear-un-videojuego-2d-con-ruby-y-gosu.html">05 Campanas</a>: Definición del objeto Campana.<br /><br />Del mismo modo que hemos hecho con las campanas, vamos a proceder a crear una clase para la puerta, a esta clase la vamos a llamar Door y va a ir en un fichero llamado "door.rb" en la carpeta "lib". En este caso, el constructor (método "initialize()") únicamente contendrá la posición en X e Y de la puerta: <div class="codebox"><pre><br /><span>class Door</span><br /><span>  def initialize(window, x, y)</span><br /><span>    @window = window</span><br /><span>    @position_x = x</span><br /><span>    @position_y = y</span><br /><span>    @door = Gosu::Image.new("media/door_6.png")</span><br /><span>  end</span><br /><span></span><br /><span>  def door_6_6</span><br /><span>    @door = Gosu::Image.new("media/door_6.png")</span><br /><span>  end</span><br /><span></span><br /><span>  def door_5_6</span><br /><span>    @door = Gosu::Image.new("media/door_5.png")</span><br /><span>  end</span><br /><span></span><br /><span>  def door_4_6</span><br /><span>    @door = Gosu::Image.new("media/door_4.png")</span><br /><span>  end</span><br /><span></span><br /><span>  def door_3_6</span><br /><span>    @door = Gosu::Image.new("media/door_3.png")</span><br /><span>  end</span><br /><span></span><br /><span>  def door_2_6</span><br /><span>    @door = Gosu::Image.new("media/door_2.png")</span><br /><span>  end</span><br /><span></span><br /><span>  def door_1_6</span><br /><span>    @door = Gosu::Image.new("media/door_1.png")</span><br /><span>  end</span><br /><span></span><br /><span>  def door_0_6</span><br /><span>    @door = Gosu::Image.new("media/door_0.png")</span><br /><span>  end</span><br /><span></span><br /><span>  def check_pattern(master_pattern, pattern)</span><br /><span>    ...</span><br /><span>  end</span><br /><span></span><br /><span>  def draw</span><br /><span>    @door.draw(@position_x, @position_y, 1)</span><br /><span>  end</span><br /><span>end</span><br /></pre></div><br />Observamos que se han creado tambien una serie de métodos que nos van a permitir cambiar la imagen con el estado de la puerta de completamente cerrada a completamente abierta (métodos "door_x_6()"). También hemos añadido un método "check_pattern()" que nos va a permitir comprobar si el patrón introducido con las campanas es correcto y por tanto ir abriendo la puerta.<br /><br />Finalmente, dibujamos en pantalla la puerta: <div class="codebox"><pre><br /><span>require "rubygems"</span><br /><span>require "gosu"</span><br /><span>require_relative "lib/bell"</span><br /><span>require_relative "lib/door"</span><br /><span></span><br /><span>...</span><br /><span></span><br /><span>class Game < Gosu::Window</span><br /><span>  def initialize</span><br /><span>    super 800, 600</span><br /><span>    self.caption = "Juego de las campanas"</span><br /><span>    ...</span><br /><span>    @door = Door.new(self, 0, 0)</span><br /><span>  end</span><br /><span></span><br /><span>  def update</span><br /><span>  end</span><br /><span></span><br /><span>  def draw</span><br /><span>    ...</span><br /><span>    @door.draw</span><br /><span>  end</span><br /><span>end</span><br /><span></span><br /><span>window = Game.new</span><br /><span>window.show</span><br /></pre></div><br /><div class="separator" style="clear: both; text-align: center;"><a href="https://3.bp.blogspot.com/-GxJjNZ2e-vI/WkY4tVGRAPI/AAAAAAAAADY/4T6F9RcGjggSX9KKJMizaew2QtO7xqQRACLcBGAs/s1600/bells_door.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" data-original-height="598" data-original-width="795" height="240" src="https://3.bp.blogspot.com/-GxJjNZ2e-vI/WkY4tVGRAPI/AAAAAAAAADY/4T6F9RcGjggSX9KKJMizaew2QtO7xqQRACLcBGAs/s320/bells_door.png" width="320" /></a></div><br />